var popup=document.querySelector(".modal"),button=document.querySelector(".contacts .button"),close=popup.querySelector(".close"),slide1=document.querySelector(".principle-design"),slide2=document.querySelector(".principle-math"),slide3=document.querySelector(".principle-work"),btn1=document.querySelector(".slide-btn-first"),btn2=document.querySelector(".slide-btn-second"),btn3=document.querySelector(".slide-btn-third"),firstName=popup.querySelector("#name"),email=popup.querySelector("#email"),letter=popup.querySelector("#letter"),form=popup.querySelector(".form-modal"),storageName="",storageMail="",isStorageSupport=!0;try{storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storageName&&(firstName.value=storageName),storageMail&&(email.value=storageMail),firstName.value?email.value?letter.focus():email.focus():firstName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-error"),popup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&(popup.classList.remove("modal-error"),popup.classList.remove("modal-show")))}),form.addEventListener("submit",function(e){firstName.value&&email.value&&letter.value?isStorageSupport&&(localStorage.setItem("name",firstName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("modal-error"),setTimeout(function(){popup.classList.add("modal-error")},1))}),btn1.addEventListener("click",function(e){e.preventDefault(),slide2.classList.remove("principle-checked"),slide3.classList.remove("principle-checked"),slide1.classList.add("principle-checked"),btn2.classList.remove("slide-current"),btn3.classList.remove("slide-current"),btn1.classList.add("slide-current")}),btn2.addEventListener("click",function(e){e.preventDefault(),slide1.classList.remove("principle-checked"),slide3.classList.remove("principle-checked"),slide2.classList.add("principle-checked"),btn1.classList.remove("slide-current"),btn3.classList.remove("slide-current"),btn2.classList.add("slide-current")}),btn3.addEventListener("click",function(e){e.preventDefault(),slide1.classList.remove("principle-checked"),slide2.classList.remove("principle-checked"),slide3.classList.add("principle-checked"),btn1.classList.remove("slide-current"),btn2.classList.remove("slide-current"),btn3.classList.add("slide-current")});
